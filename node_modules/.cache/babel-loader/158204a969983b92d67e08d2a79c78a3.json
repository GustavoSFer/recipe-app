{"ast":null,"code":"import _regeneratorRuntime from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import{Button}from'react-bootstrap';import{getCategories,getByCategory,getDrinks,getMeals}from'../services/requestApi';import ContextAppReceita from'../ContextAPI/ContextAppReceita';var MAX_CATEGORIES=5;function RenderCategories(props){var local=props.local;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState('All'),_useState4=_slicedToArray(_useState3,2),curCategory=_useState4[0],setCurCategory=_useState4[1];var _useContext=useContext(ContextAppReceita),setMeals=_useContext.setMeals,setDrinks=_useContext.setDrinks;useEffect(function(){function getCategoriesFunc(){return _getCategoriesFunc.apply(this,arguments);}function _getCategoriesFunc(){_getCategoriesFunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var categoriesRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCategories(local);case 2:categoriesRes=_context.sent;setCategories(categoriesRes);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getCategoriesFunc.apply(this,arguments);}getCategoriesFunc();},[local]);function setDefaultCategory(){return _setDefaultCategory.apply(this,arguments);}function _setDefaultCategory(){_setDefaultCategory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setCurCategory('All');if(!(local==='bebidas')){_context2.next=9;break;}_context2.t0=setDrinks;_context2.next=5;return getDrinks();case 5:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);_context2.next=14;break;case 9:_context2.t2=setMeals;_context2.next=12;return getMeals();case 12:_context2.t3=_context2.sent;(0,_context2.t2)(_context2.t3);case 14:case\"end\":return _context2.stop();}}},_callee2);}));return _setDefaultCategory.apply(this,arguments);}function setCategorie(_x){return _setCategorie.apply(this,arguments);}function _setCategorie(){_setCategorie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(category){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(category!==curCategory)){_context3.next=8;break;}setCurCategory(category);_context3.next=4;return getByCategory(category,local);case 4:result=_context3.sent;if(local==='bebidas')setDrinks(result);else setMeals(result);_context3.next=9;break;case 8:setDefaultCategory();case 9:case\"end\":return _context3.stop();}}},_callee3);}));return _setCategorie.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},categories.slice(0,MAX_CATEGORIES).map(function(_ref){var strCategory=_ref.strCategory;return/*#__PURE__*/React.createElement(\"div\",{key:strCategory,className:\"p-1 col-sm-6 col-md-4 col-xl-2\"},/*#__PURE__*/React.createElement(Button,{\"data-testid\":\"\".concat(strCategory,\"-category-filter\"),type:\"button\",className:\"\".concat(strCategory===curCategory?'btn-secondary':null,\"\\n              btn-all-width btn-shadow-custom\"),onClick:function onClick(){return setCategorie(strCategory);}},strCategory));}),/*#__PURE__*/React.createElement(\"div\",{className:\"p-1 col-sm-6 col-md-4 col-xl-2\"},/*#__PURE__*/React.createElement(Button,{\"data-testid\":\"All-category-filter\",type:\"button\",className:\"\".concat(curCategory==='All'?'btn-secondary':null,\"\\n            btn-all-width btn-shadow-custom\"),onClick:function onClick(){return setDefaultCategory();}},\"All\")));}export default RenderCategories;","map":{"version":3,"sources":["/home/gustavo/github/recipe-app/src/Components/RenderCategories.jsx"],"names":["React","useEffect","useState","useContext","Button","getCategories","getByCategory","getDrinks","getMeals","ContextAppReceita","MAX_CATEGORIES","RenderCategories","props","local","categories","setCategories","curCategory","setCurCategory","setMeals","setDrinks","getCategoriesFunc","categoriesRes","setDefaultCategory","setCategorie","category","result","slice","map","strCategory"],"mappings":"+bAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,UAArC,KAAuD,OAAvD,CAEA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OACEC,aADF,CAEEC,aAFF,CAGEC,SAHF,CAIEC,QAJF,KAIkB,wBAJlB,CAKA,MAAOC,CAAAA,iBAAP,KAA8B,iCAA9B,CAEA,GAAMC,CAAAA,cAAc,CAAG,CAAvB,CAEA,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,IACvBC,CAAAA,KADuB,CACbD,KADa,CACvBC,KADuB,eAEKX,QAAQ,CAAC,EAAD,CAFb,wCAExBY,UAFwB,eAEZC,aAFY,8BAGOb,QAAQ,CAAC,KAAD,CAHf,yCAGxBc,WAHwB,eAGXC,cAHW,+BAICd,UAAU,CAACM,iBAAD,CAJX,CAIvBS,QAJuB,aAIvBA,QAJuB,CAIbC,SAJa,aAIbA,SAJa,CAM/BlB,SAAS,CAAC,UAAM,SACCmB,CAAAA,iBADD,6JACd,2KAC8Bf,CAAAA,aAAa,CAACQ,KAAD,CAD3C,QACQQ,aADR,eAEEN,aAAa,CAACM,aAAD,CAAb,CAFF,sDADc,oDAKdD,iBAAiB,GAClB,CANQ,CAMN,CAACP,KAAD,CANM,CAAT,CAN+B,QAchBS,CAAAA,kBAdgB,gKAc/B,wIACEL,cAAc,CAAC,KAAD,CAAd,CADF,KAEMJ,KAAK,GAAK,SAFhB,wCAE2BM,SAF3B,wBAE2CZ,CAAAA,SAAS,EAFpD,+GAGOW,QAHP,yBAGsBV,CAAAA,QAAQ,EAH9B,6HAd+B,6DAoBhBe,CAAAA,YApBgB,gJAoB/B,kBAA4BC,QAA5B,sIACMA,QAAQ,GAAKR,WADnB,2BAEIC,cAAc,CAACO,QAAD,CAAd,CAFJ,uBAGyBlB,CAAAA,aAAa,CAACkB,QAAD,CAAWX,KAAX,CAHtC,QAGUY,MAHV,gBAII,GAAIZ,KAAK,GAAK,SAAd,CAAyBM,SAAS,CAACM,MAAD,CAAT,CAAzB,IACKP,CAAAA,QAAQ,CAACO,MAAD,CAAR,CALT,8BAOIH,kBAAkB,GAPtB,wDApB+B,+CA+B/B,mBACE,2BAAK,SAAS,CAAC,KAAf,EACGR,UAAU,CAACY,KAAX,CAAiB,CAAjB,CAAoBhB,cAApB,EAAoCiB,GAApC,CAAwC,kBAAGC,CAAAA,WAAH,MAAGA,WAAH,oBACvC,2BAAK,GAAG,CAAGA,WAAX,CAAyB,SAAS,CAAC,gCAAnC,eACE,oBAAC,MAAD,EACE,wBAAiBA,WAAjB,oBADF,CAEE,IAAI,CAAC,QAFP,CAGE,SAAS,WACJA,WAAW,GAAKZ,WAAhB,CAA8B,eAA9B,CAAgD,IAD5C,mDAHX,CAOE,OAAO,CAAG,yBAAMO,CAAAA,YAAY,CAACK,WAAD,CAAlB,EAPZ,EASGA,WATH,CADF,CADuC,EAAxC,CADH,cAgBE,2BAAK,SAAS,CAAC,gCAAf,eACE,oBAAC,MAAD,EACE,cAAY,qBADd,CAEE,IAAI,CAAC,QAFP,CAGE,SAAS,WACJZ,WAAW,GAAK,KAAhB,CAAwB,eAAxB,CAA0C,IADtC,iDAHX,CAOE,OAAO,CAAG,yBAAMM,CAAAA,kBAAkB,EAAxB,EAPZ,QADF,CAhBF,CADF,CAgCD,CAMD,cAAeX,CAAAA,gBAAf","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport {\n  getCategories,\n  getByCategory,\n  getDrinks,\n  getMeals } from '../services/requestApi';\nimport ContextAppReceita from '../ContextAPI/ContextAppReceita';\n\nconst MAX_CATEGORIES = 5;\n\nfunction RenderCategories(props) {\n  const { local } = props;\n  const [categories, setCategories] = useState([]);\n  const [curCategory, setCurCategory] = useState('All');\n  const { setMeals, setDrinks } = useContext(ContextAppReceita);\n\n  useEffect(() => {\n    async function getCategoriesFunc() {\n      const categoriesRes = await getCategories(local);\n      setCategories(categoriesRes);\n    }\n    getCategoriesFunc();\n  }, [local]);\n\n  async function setDefaultCategory() {\n    setCurCategory('All');\n    if (local === 'bebidas') setDrinks(await getDrinks());\n    else setMeals(await getMeals());\n  }\n\n  async function setCategorie(category) {\n    if (category !== curCategory) {\n      setCurCategory(category);\n      const result = await getByCategory(category, local);\n      if (local === 'bebidas') setDrinks(result);\n      else setMeals(result);\n    } else {\n      setDefaultCategory();\n    }\n  }\n\n  return (\n    <div className=\"row\">\n      {categories.slice(0, MAX_CATEGORIES).map(({ strCategory }) => (\n        <div key={ strCategory } className=\"p-1 col-sm-6 col-md-4 col-xl-2\">\n          <Button\n            data-testid={ `${strCategory}-category-filter` }\n            type=\"button\"\n            className={\n              `${strCategory === curCategory ? 'btn-secondary' : null}\n              btn-all-width btn-shadow-custom`\n            }\n            onClick={ () => setCategorie(strCategory) }\n          >\n            {strCategory}\n          </Button>\n        </div>\n      ))}\n      <div className=\"p-1 col-sm-6 col-md-4 col-xl-2\">\n        <Button\n          data-testid=\"All-category-filter\"\n          type=\"button\"\n          className={\n            `${curCategory === 'All' ? 'btn-secondary' : null}\n            btn-all-width btn-shadow-custom`\n          }\n          onClick={ () => setDefaultCategory() }\n        >\n          All\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nRenderCategories.propTypes = {\n  local: PropTypes.string.isRequired,\n};\n\nexport default RenderCategories;\n"]},"metadata":{},"sourceType":"module"}