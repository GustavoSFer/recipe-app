{"ast":null,"code":"import _regeneratorRuntime from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{Button}from'react-bootstrap';import{useHistory}from'react-router-dom';import{searchApi}from'../services/requestApi';import ContextAppReceita from'../ContextAPI/ContextAppReceita';var PRIMEIRA_LETRA='Primeira letra';function SearchBar(props){var history=useHistory();var local=props.local;var _useContext=useContext(ContextAppReceita),setMeals=_useContext.setMeals,setDrinks=_useContext.setDrinks;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState('Ingrediente'),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],setType=_useState4[1];function getRadioSelected(e){setType(e.target.value);}function makeSearch(_x){return _makeSearch.apply(this,arguments);}function _makeSearch(){_makeSearch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var key,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:key=local.toLowerCase();e.preventDefault();if(!(type===PRIMEIRA_LETRA&&search.length!==1)){_context.next=5;break;}global.alert('Sua busca deve conter somente 1 (um) caracter');return _context.abrupt(\"return\");case 5:_context.next=7;return searchApi(type,search,local);case 7:result=_context.sent;if(result){_context.next=11;break;}global.alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');return _context.abrupt(\"return\");case 11:if(result&&result.length===1){history.push(\"\".concat(key,\"/\").concat(result[0][key==='bebidas'?'idDrink':'idMeal']));}return _context.abrupt(\"return\",key==='bebidas'?setDrinks(result):setMeals(result));case 13:case\"end\":return _context.stop();}}},_callee);}));return _makeSearch.apply(this,arguments);}function renderRadioButtons(){return/*#__PURE__*/React.createElement(\"div\",{onChange:getRadioSelected,className:\"custom-row get-all-space m-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-lg-4 radio1\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"ingredientButton\",className:\"input-group my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"ingredient-search-radio\",type:\"radio\",name:\"radioButton\",id:\"ingredientButton\",value:\"Ingrediente\",className:\"form-check-input mt-0\",checked:type==='Ingrediente',\"aria-label\":\"Ingrediente\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"form-control bg-white bg-white\"},\"Ingrediente\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-lg-4 radio2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"nameSearch\",className:\"input-group my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"name-search-radio\",type:\"radio\",name:\"radioButton\",id:\"nameSearch\",value:\"Nome\",checked:type==='Nome',className:\"form-check-input mt-0\",\"aria-label\":\"Ingrediente\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"form-control bg-white\"},\"Nome\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-lg-4 radio3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"letterSearch\",className:\"input-group my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\"},/*#__PURE__*/React.createElement(\"input\",{\"data-testid\":\"first-letter-search-radio\",type:\"radio\",name:\"radioButton\",id:\"letterSearch\",value:\"Primeira letra\",checked:type==='Primeira letra',className:\"form-check-input mt-0\",\"aria-label\":\"Ingrediente\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"form-control bg-white\"},\"Primeira letra\"))));}return/*#__PURE__*/React.createElement(\"form\",{onSubmit:makeSearch,className:\"bg-white container py-2 px-3 border-search-bar rounded-bottom\"},renderRadioButtons(),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group my-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text input-group-search-bar\",id:\"inputGroup-input\"},type),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",\"data-testid\":\"search-input\",className:\"form-control ps-4\",\"aria-label\":\"Nome da receita/produto/primeira letra\",onChange:function onChange(e){return setSearch(e.target.value);},\"aria-describedby\":\"inputGroup-input\",placeholder:\"Informe \".concat(type===PRIMEIRA_LETRA?'a':'o',\" \").concat(type)})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",\"data-testid\":\"exec-search-btn\",className:\"btn-all-width\"},\"Procurar\"));}export default SearchBar;","map":{"version":3,"sources":["/home/gustavo/github/recipe-app/src/Components/SeachBar.jsx"],"names":["React","useState","useContext","Button","useHistory","searchApi","ContextAppReceita","PRIMEIRA_LETRA","SearchBar","props","history","local","setMeals","setDrinks","search","setSearch","type","setType","getRadioSelected","e","target","value","makeSearch","key","toLowerCase","preventDefault","length","global","alert","result","push","renderRadioButtons"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport { searchApi } from '../services/requestApi';\nimport ContextAppReceita from '../ContextAPI/ContextAppReceita';\n\nconst PRIMEIRA_LETRA = 'Primeira letra';\n\nfunction SearchBar(props) {\n  const history = useHistory();\n  const { local } = props;\n  const { setMeals, setDrinks } = useContext(ContextAppReceita);\n  const [search, setSearch] = useState('');\n  const [type, setType] = useState('Ingrediente');\n\n  function getRadioSelected(e) {\n    setType(e.target.value);\n  }\n\n  async function makeSearch(e) {\n    const key = local.toLowerCase();\n    e.preventDefault();\n    if (type === PRIMEIRA_LETRA && search.length !== 1) {\n      global.alert('Sua busca deve conter somente 1 (um) caracter');\n      return;\n    }\n    const result = await searchApi(type, search, local);\n    if (!result) {\n      global.alert(\n        'Sinto muito, não encontramos nenhuma receita para esses filtros.',\n      );\n      return;\n    }\n    if (result && result.length === 1) {\n      history.push(`${key}/${result[0][key === 'bebidas' ? 'idDrink' : 'idMeal']}`);\n    }\n    return key === 'bebidas' ? setDrinks(result) : setMeals(result);\n  }\n\n  function renderRadioButtons() {\n    return (\n      <div\n        onChange={ getRadioSelected }\n        className=\"custom-row get-all-space m-0\"\n      >\n        <div className=\"col-12 col-lg-4 radio1\">\n          <label htmlFor=\"ingredientButton\" className=\"input-group my-1\">\n            <div className=\"input-group-text\">\n              <input\n                data-testid=\"ingredient-search-radio\"\n                type=\"radio\"\n                name=\"radioButton\"\n                id=\"ingredientButton\"\n                value=\"Ingrediente\"\n                className=\"form-check-input mt-0\"\n                checked={ type === 'Ingrediente' }\n                aria-label=\"Ingrediente\"\n              />\n            </div>\n            <span\n              className=\"form-control bg-white bg-white\"\n            >\n              Ingrediente\n            </span>\n          </label>\n        </div>\n        <div className=\"col-12 col-lg-4 radio2\">\n          <label htmlFor=\"nameSearch\" className=\"input-group my-1\">\n            <div className=\"input-group-text\">\n              <input\n                data-testid=\"name-search-radio\"\n                type=\"radio\"\n                name=\"radioButton\"\n                id=\"nameSearch\"\n                value=\"Nome\"\n                checked={ type === 'Nome' }\n                className=\"form-check-input mt-0\"\n                aria-label=\"Ingrediente\"\n              />\n            </div>\n            <span\n              className=\"form-control bg-white\"\n            >\n              Nome\n            </span>\n          </label>\n        </div>\n        <div className=\"col-12 col-lg-4 radio3\">\n          <label htmlFor=\"letterSearch\" className=\"input-group my-1\">\n            <div className=\"input-group-text\">\n              <input\n                data-testid=\"first-letter-search-radio\"\n                type=\"radio\"\n                name=\"radioButton\"\n                id=\"letterSearch\"\n                value=\"Primeira letra\"\n                checked={ type === 'Primeira letra' }\n                className=\"form-check-input mt-0\"\n                aria-label=\"Ingrediente\"\n              />\n            </div>\n            <span\n              className=\"form-control bg-white\"\n            >\n              Primeira letra\n            </span>\n          </label>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <form\n      onSubmit={ makeSearch }\n      className=\"bg-white container py-2 px-3 border-search-bar rounded-bottom\"\n    >\n      {renderRadioButtons()}\n      <div className=\"input-group my-3\">\n        <span\n          className=\"input-group-text input-group-search-bar\"\n          id=\"inputGroup-input\"\n        >\n          {type}\n        </span>\n        <input\n          type=\"text\"\n          data-testid=\"search-input\"\n          className=\"form-control ps-4\"\n          aria-label=\"Nome da receita/produto/primeira letra\"\n          onChange={ (e) => setSearch(e.target.value) }\n          aria-describedby=\"inputGroup-input\"\n          placeholder={ `Informe ${type === PRIMEIRA_LETRA ? 'a' : 'o'} ${type}` }\n        />\n      </div>\n      <Button\n        type=\"submit\"\n        data-testid=\"exec-search-btn\"\n        className=\"btn-all-width\"\n      >\n        Procurar\n      </Button>\n    </form>\n  );\n}\n\nSearchBar.propTypes = {\n  local: PropTypes.string.isRequired,\n};\n\nexport default SearchBar;\n"]},"metadata":{},"sourceType":"module"}