{"ast":null,"code":"import _toConsumableArray from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/gustavo/github/recipe-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import FavButton from'./FavButton';import CopyButton from'./CopyButton';import Video from'./Video';import{doneRecipe,setInProgressRecipe,getRecipeInProgress,removeRecipeInProgress}from'../localStorage';import CheckboxIngredients from'./CheckboxIngredients';import'../CSS/recipeInProgress.css';function RenderRecipeInProgress(props){var id=props.id,title=props.title,ingredients=props.ingredients,instructions=props.instructions,image=props.image,category=props.category,chosenRecipe=props.chosenRecipe,type=props.type,video=props.video,alcoholic=props.alcoholic;var _useState=useState(getRecipeInProgress(id,type)),_useState2=_slicedToArray(_useState,2),checkedIngre=_useState2[0],setCheckedIngre=_useState2[1];var history=useHistory();var handleFinishRecipe=function handleFinishRecipe(){var doneDate=new Date().toLocaleDateString('pt-BR');var finishedRecipe=_objectSpread(_objectSpread({},chosenRecipe),{},{doneDate:doneDate});doneRecipe(finishedRecipe);removeRecipeInProgress(id,type);history.push('/receitas-feitas');};var handleCheckbox=function handleCheckbox(ingredient){if(checkedIngre.includes(ingredient)){var _newCheckedIngre=checkedIngre.filter(function(curIngredient){return curIngredient!==ingredient;});setCheckedIngre(_newCheckedIngre);setInProgressRecipe(id,_newCheckedIngre,type);return false;}var newCheckedIngre=[].concat(_toConsumableArray(checkedIngre),[ingredient]);setCheckedIngre(newCheckedIngre);setInProgressRecipe(id,newCheckedIngre,type);return true;};var curRecipe=function curRecipe(){var newRecipe=_objectSpread({},chosenRecipe);delete newRecipe.tags;return newRecipe;};function renderShareLikeButton(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FavButton,{recipe:curRecipe(),dataTestId:\"favorite-btn\"}),/*#__PURE__*/React.createElement(CopyButton,{link:window.location.href.replace('/in-progress','')}));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-container position-relative mt-3\"},/*#__PURE__*/React.createElement(\"img\",{src:image,alt:\"Recipe\",\"data-testid\":\"recipe-photo\",className:\"img-card border border-secondary\"}),/*#__PURE__*/React.createElement(\"h1\",{\"data-testid\":\"recipe-title\",className:\"recipe-name-details text-white mb-0\"},title),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"recipe-category\",className:\"recipe-category-details mb-0 text-white\"},alcoholic==='Alcoholic'?\"\".concat(alcoholic,\"! \").concat(category):category),/*#__PURE__*/React.createElement(\"div\",{className:\"fav-share-button-details\"},renderShareLikeButton()))),/*#__PURE__*/React.createElement(\"div\",{className:\"my-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Ingredientes\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"p-3 bg-gray-500 rounded-3\"},ingredients&&ingredients.map(function(ingredient,index){return/*#__PURE__*/React.createElement(CheckboxIngredients,{key:index,ingredient:ingredient,index:index,handleChange:function handleChange(){return handleCheckbox(ingredient);},checked:checkedIngre.includes(ingredient)});}))),/*#__PURE__*/React.createElement(\"div\",{className:\"my-4\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Instru\\xE7\\xE3o\"),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"instructions\",className:\"p-3 bg-gray-500 rounded-3\"},instructions)),video&&/*#__PURE__*/React.createElement(\"div\",{className:\"my-4\"},/*#__PURE__*/React.createElement(\"h4\",{\"data-testid\":\"video\"},\"Video\"),/*#__PURE__*/React.createElement(Video,{url:video}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",\"data-testid\":\"finish-recipe-btn\",className:\"\".concat(ingredients.length!==checkedIngre.length?'btn-secondary':'btn-primary',\"\\n            startRecipeButton btn btn-all-width rounded-0 fs-3 opacity-100\"),disabled:ingredients.length!==checkedIngre.length,onClick:handleFinishRecipe},\"Finalizar Receita\")));}RenderRecipeInProgress.defaultProps={video:null,alcoholic:null};export default RenderRecipeInProgress;","map":{"version":3,"sources":["/home/gustavo/github/recipe-app/src/Components/RenderRecipeInProgress.jsx"],"names":["React","useState","useHistory","FavButton","CopyButton","Video","doneRecipe","setInProgressRecipe","getRecipeInProgress","removeRecipeInProgress","CheckboxIngredients","RenderRecipeInProgress","props","id","title","ingredients","instructions","image","category","chosenRecipe","type","video","alcoholic","checkedIngre","setCheckedIngre","history","handleFinishRecipe","doneDate","Date","toLocaleDateString","finishedRecipe","push","handleCheckbox","ingredient","includes","newCheckedIngre","filter","curIngredient","curRecipe","newRecipe","tags","renderShareLikeButton","window","location","href","replace","map","index","length","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport FavButton from './FavButton';\nimport CopyButton from './CopyButton';\nimport Video from './Video';\nimport {\n  doneRecipe,\n  setInProgressRecipe,\n  getRecipeInProgress,\n  removeRecipeInProgress,\n} from '../localStorage';\nimport CheckboxIngredients from './CheckboxIngredients';\nimport '../CSS/recipeInProgress.css';\n\nfunction RenderRecipeInProgress(props) {\n  const {\n    id,\n    title,\n    ingredients,\n    instructions,\n    image,\n    category,\n    chosenRecipe,\n    type,\n    video,\n    alcoholic,\n  } = props;\n\n  const [checkedIngre, setCheckedIngre] = useState(getRecipeInProgress(id, type));\n\n  const history = useHistory();\n\n  const handleFinishRecipe = () => {\n    const doneDate = new Date().toLocaleDateString('pt-BR');\n    const finishedRecipe = {\n      ...chosenRecipe,\n      doneDate,\n    };\n    doneRecipe(finishedRecipe);\n    removeRecipeInProgress(id, type);\n    history.push('/receitas-feitas');\n  };\n\n  const handleCheckbox = (ingredient) => {\n    if (checkedIngre.includes(ingredient)) {\n      const newCheckedIngre = checkedIngre.filter(\n        (curIngredient) => curIngredient !== ingredient,\n      );\n      setCheckedIngre(newCheckedIngre);\n      setInProgressRecipe(id, newCheckedIngre, type);\n      return false;\n    }\n    const newCheckedIngre = [...checkedIngre, ingredient];\n    setCheckedIngre(newCheckedIngre);\n    setInProgressRecipe(id, newCheckedIngre, type);\n    return true;\n  };\n\n  const curRecipe = () => {\n    const newRecipe = { ...chosenRecipe };\n    delete newRecipe.tags;\n    return newRecipe;\n  };\n\n  function renderShareLikeButton() {\n    return (\n      <>\n        <FavButton recipe={ curRecipe() } dataTestId=\"favorite-btn\" />\n        <CopyButton link={ window.location.href.replace('/in-progress', '') } />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"d-flex justify-content-center\">\n          <div className=\"image-container position-relative mt-3\">\n            <img\n              src={ image }\n              alt=\"Recipe\"\n              data-testid=\"recipe-photo\"\n              className=\"img-card border border-secondary\"\n            />\n            <h1\n              data-testid=\"recipe-title\"\n              className=\"recipe-name-details text-white mb-0\"\n            >\n              { title }\n            </h1>\n            <p\n              data-testid=\"recipe-category\"\n              className=\"recipe-category-details mb-0 text-white\"\n            >\n              {alcoholic === 'Alcoholic' ? `${alcoholic}! ${category}` : category}\n            </p>\n            <div className=\"fav-share-button-details\">\n              {renderShareLikeButton()}\n            </div>\n          </div>\n        </div>\n        <div className=\"my-4\">\n          <h4>Ingredientes</h4>\n          <ul className=\"p-3 bg-gray-500 rounded-3\">\n            {ingredients && ingredients.map((ingredient, index) => (\n              <CheckboxIngredients\n                key={ index }\n                ingredient={ ingredient }\n                index={ index }\n                handleChange={ () => handleCheckbox(ingredient) }\n                checked={ checkedIngre.includes(ingredient) }\n              />\n            ))}\n          </ul>\n        </div>\n        <div className=\"my-4\">\n          <h4>Instrução</h4>\n          <p\n            data-testid=\"instructions\"\n            className=\"p-3 bg-gray-500 rounded-3\"\n          >\n            {instructions}\n          </p>\n        </div>\n        {video && (\n          <div className=\"my-4\">\n            <h4 data-testid=\"video\">Video</h4>\n            <Video url={ video } />\n          </div>\n        )}\n      </div>\n      <div>\n        <button\n          type=\"button\"\n          data-testid=\"finish-recipe-btn\"\n          className={ `${ingredients.length !== checkedIngre.length\n            ? 'btn-secondary' : 'btn-primary'}\n            startRecipeButton btn btn-all-width rounded-0 fs-3 opacity-100` }\n          disabled={ ingredients.length !== checkedIngre.length }\n          onClick={ handleFinishRecipe }\n        >\n          Finalizar Receita\n        </button>\n      </div>\n    </>\n  );\n}\n\nRenderRecipeInProgress.propTypes = {\n  id: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  ingredients: PropTypes.arrayOf(PropTypes.string).isRequired,\n  instructions: PropTypes.string.isRequired,\n  image: PropTypes.string.isRequired,\n  category: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  video: PropTypes.string,\n  alcoholic: PropTypes.string,\n  chosenRecipe: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    area: PropTypes.string.isRequired,\n    category: PropTypes.string.isRequired,\n    alcoholicOrNot: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    image: PropTypes.string.isRequired,\n    tags: PropTypes.arrayOf(PropTypes.string).isRequired,\n  }).isRequired,\n};\n\nRenderRecipeInProgress.defaultProps = {\n  video: null,\n  alcoholic: null,\n};\n\nexport default RenderRecipeInProgress;\n"]},"metadata":{},"sourceType":"module"}